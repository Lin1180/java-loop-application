<html>
<script>

var words = ['int num = ', 'boolean isPrime = true', 'int i = 2', 'i <= Math.sqrt(num)', 'num % i == 0', 'isPrime = false', 'break', 'i++', 'isPrime', '輸出是質數', '輸出非質數'];
var codeid=['s1','s2','s3','s4','s5','s6','s7','s8','s9','s10','s11'];
var javaid=['c1','c2','c3','c4','c5','c6','c7','c8','c9','c10','c11'];
var ctx;
var num1, num2, temp;
var num;
var current = -1;
var pre = -1;
var p = true;
var inti = 2;

function initFlowChart()
{
    var canvas = document.getElementById("cs1");
    ctx = canvas.getContext("2d");
    ctx.scale(2,2);
    ctx.font = "8px Arial";
    ctx.textAlign = 'center';

    ctx.beginPath();
    ctx.moveTo(120, 0);
    ctx.lineTo(120, 10);
    ctx.stroke();
    ctx.closePath();
    for(var i = 0; i < 11; i++)
	{
		if(i < 3)
		{
			ctx.strokeRect(70, 10 + i * 25, 100, 15);
			ctx.fillText(words[i], 120, 20 + i * 25);
			
			ctx.beginPath();
			ctx.moveTo(120, 25 + i * 25);
			ctx.lineTo(120, 35 + i * 25);
			ctx.stroke();
			ctx.closePath();
        }
        else if(i == 3)
		{
			ctx.beginPath();
			ctx.moveTo(70, 35 + (i-1) * 25 + 15);
			ctx.lineTo(120, 35 + (i-1) * 25);//上面那條加10
			ctx.lineTo(170, 35 + (i-1) * 25 + 15);
			ctx.lineTo(120, 35 + (i-1) * 25 + 30);//上下差25
			
			ctx.closePath();
			ctx.stroke();
			ctx.fillText(words[i], 120, 27.5 + i * 25);
			
			ctx.beginPath();
			ctx.moveTo(120, 40 + i * 25);
			ctx.lineTo(120, 50 + i * 25);
			ctx.stroke();
			ctx.closePath();
        }
		else if(i == 4)
		{
			ctx.beginPath();
			ctx.moveTo(85, 50 + (i-1) * 25 + 12.5);
			ctx.lineTo(120, 50 + (i-1) * 25);
			ctx.lineTo(155, 50 + (i-1) * 25 + 12.5);
			ctx.lineTo(120, 75 + (i-1) * 25);
			
			ctx.closePath();
			ctx.stroke();
			ctx.fillText(words[i], 120, 40 + i * 25);
			
        }
		else if(i < 7)
		{	
			ctx.beginPath();
			ctx.moveTo(84, 12.5 + i * 25);
			ctx.lineTo(84, 30 + i * 25);
			ctx.stroke();
			ctx.closePath();
			
			ctx.strokeRect(40, 30 + i * 25, 60, 15);
			ctx.fillText(words[i], 70, 40 + i * 25);
			
			i++;
			ctx.beginPath();
			ctx.moveTo(84, 20 + i * 25);
			ctx.lineTo(84, 37.5 + i * 25);
			ctx.stroke();
			ctx.closePath();
			ctx.strokeRect(40, 37.5 + i * 25, 60, 15);
			ctx.fillText(words[i], 70, 47.5 + i * 25);
			//i++;
        }
		else if(i == 7)
		{
			ctx.beginPath();
			ctx.moveTo(120, 25 + (i-2) * 25);
			ctx.lineTo(120, 45 + (i-2) * 25);
			ctx.stroke();
			ctx.closePath();
			
			ctx.strokeRect(110, 45 + (i-2) * 25, 20, 15);
			ctx.fillText(words[i], 120, 55 + (i-2) * 25);
			
			
        }
		else if(i == 8)
		{
			ctx.beginPath();
			ctx.moveTo(120, 15 + i * 25);
			ctx.lineTo(120, 30 + i * 25);
			ctx.stroke();
			ctx.closePath();
			
			
			ctx.beginPath();
			ctx.moveTo(100, 40 + i * 25);
			ctx.lineTo(120, 30 + i * 25);
			ctx.lineTo(140, 40 + i * 25);
			ctx.lineTo(120, 50 + i * 25);//上下差15
			
			
			ctx.closePath();
			ctx.stroke();
			ctx.fillText(words[i], 120, 42.5 + i * 25);
			
			//ctx.strokeRect(115, 45 + i * 25, 50, 15);
			//ctx.fillText(words[i], 125, 55 + i * 25);
			
			
        }
		else
		{
			ctx.beginPath();
			ctx.moveTo(100, 15 + i * 25);
			ctx.lineTo(85, 15 + i * 25);
			ctx.lineTo(85, 25 + i * 25);
			ctx.stroke();
			ctx.closePath();
			
			
			ctx.strokeRect(60, 25 + i * 25, 50, 15);
			ctx.fillText(words[i], 85, 35 + i * 25);
			
			ctx.beginPath();
			ctx.moveTo(140, 15 + i * 25);
			ctx.lineTo(155, 15 + i * 25);
			ctx.lineTo(155, 25 + i * 25);
			ctx.stroke();
			ctx.closePath();
			
			i++;
			ctx.strokeRect(130, 25 + (i-1) * 25, 50, 15);
			ctx.fillText(words[i], 155, 35 + (i-1) * 25);
			
        }
    }
	ctx.beginPath();
    ctx.moveTo(70, 100);//70
    ctx.lineTo(20, 100);
    ctx.lineTo(20, 215);
    ctx.lineTo(120.5, 215);
    ctx.stroke();
    ctx.closePath();
	
	ctx.beginPath();
    ctx.moveTo(117, 225);
    ctx.lineTo(120, 229.5);
    ctx.lineTo(123, 225);
    ctx.stroke();
    ctx.closePath();
	
	ctx.beginPath();
    ctx.moveTo(120, 80);
    ctx.lineTo(200, 80);
    ctx.lineTo(200, 200);
    ctx.lineTo(120, 200);
	ctx.lineTo(120, 185);
    ctx.stroke();
    ctx.closePath();
	
	ctx.beginPath();
    ctx.moveTo(125, 77.5);
    ctx.lineTo(121, 80);
    ctx.lineTo(125, 82.5);
    ctx.stroke();
    ctx.closePath();
	
	ctx.beginPath();
    ctx.moveTo(20, 195);
    ctx.lineTo(40, 195);
    ctx.stroke();
    ctx.closePath();
	
	ctx.beginPath();
    ctx.moveTo(25, 192.5);
    ctx.lineTo(21, 195);
	ctx.lineTo(25, 197.5);
    ctx.stroke();
    ctx.closePath();
	
	ctx.fillText("false", 70, 115);
	ctx.fillText("true", 140, 122.5);
	
	
	ctx.fillText("false", 140, 160);
	ctx.fillText("true", 70, 145);
	
	ctx.fillText("false", 147.5, 235);
	ctx.fillText("true", 90, 235);
}
function highlight(curr)
{
	document.getElementById(codeid[curr]).setAttribute("class","table-warning");
	document.getElementById(javaid[curr]).setAttribute("class","table-warning");
	document.getElementById(codeid[curr]).style.color="#dd0000";
	//document.getElementById(codeid[curr]).style.background="yellow"; 
	document.getElementById(javaid[curr]).style.color="#dd0000";
	//document.getElementById(javaid[curr]).style.background="yellow";    
	drawColor(curr);
}
function drawColor(n)
{
	ctx.fillStyle = '#ffeeaa';
	
	if(n < 3)
	{
		
		
		ctx.fillRect(71, 11 + n * 25, 98, 13);
		ctx.fillStyle = '#dd0000';
        ctx.fillText(words[n], 120, 20 + n * 25);
	}
	else if(n == 3)
	{	
		/*ctx.beginPath();
			ctx.moveTo(70, 35 + (i-1) * 25 + 15);
			ctx.lineTo(120, 35 + (i-1) * 25);//上面那條加10
			ctx.lineTo(170, 35 + (i-1) * 25 + 15);
			ctx.lineTo(120, 35 + (i-1) * 25 + 30);//上下差25
			
			ctx.closePath();
			ctx.stroke();
			ctx.fillText(words[i], 120, 27.5 + i * 25);*/
		
		ctx.beginPath();
		ctx.moveTo(72, 35 + (n-1) * 25 + 15);
        ctx.lineTo(120, 36 + (n-1) * 25);
        ctx.lineTo(168, 35 + (n-1) * 25 + 15);
        ctx.lineTo(120, 34 + (n-1) * 25 + 30);
		ctx.closePath();
		ctx.fill();
		ctx.fillStyle = '#dd0000';
		ctx.fillText(words[n], 120, 27.5 + n * 25);	
		
	}
	else if(n == 4)
	{
		
		ctx.beginPath();
		ctx.moveTo(87, 50 + (n-1) * 25 + 12.5);
		ctx.lineTo(120, 51 + (n-1) * 25);
		ctx.lineTo(153, 50 + (n-1) * 25 + 12.5);
		ctx.lineTo(120, 74 + (n-1) * 25);
		ctx.closePath();
		ctx.fill();
		ctx.fillStyle = '#dd0000';
		ctx.fillText(words[n], 120, 40 + n * 25);
		
	}
	else if(n < 7)
	{
		ctx.fillRect(41, 31 + n * 25 + (n-5) * 7.5, 58, 13);
		ctx.fillStyle = '#dd0000';
        ctx.fillText(words[n], 70, 40 + n * 25 + (n-5) * 7.5);
		
	}
	else if(n == 7)
	{
		
		ctx.fillRect(111, 46 + (n-2) * 25, 18, 13);
		ctx.fillStyle = '#dd0000';
        ctx.fillText(words[n], 120, 55 + (n-2) * 25);	
    }
	else if(n == 8)
	{
		ctx.beginPath();
		ctx.moveTo(103, 40 + n * 25);
        ctx.lineTo(120, 31 + n * 25);
        ctx.lineTo(137, 40 + n * 25);
        ctx.lineTo(120, 49 + n * 25);
		ctx.closePath();
		ctx.fill();
		ctx.fillStyle = '#dd0000';
		ctx.fillText(words[n], 120, 42.5 + n * 25);	
		
			/*ctx.beginPath();
			ctx.moveTo(100, 40 + i * 25);
			ctx.lineTo(120, 30 + i * 25);
			ctx.lineTo(140, 40 + i * 25);
			ctx.lineTo(120, 50 + i * 25);
			ctx.fillText(words[i], 120, 42.5 + i * 25);*/
    }
	else if(n == 9)
	{
			//ctx.strokeRect(30, 20 + i * 25, 100, 15);
			//ctx.fillText(words[i], 80, 30 + i * 25);
		ctx.fillRect(61, 26+ n * 25, 48, 13);
		ctx.fillStyle = '#dd0000';
        ctx.fillText(words[n], 85, 35 + n * 25);
		
		
	}
	else
	{
			//ctx.strokeRect(30, 20 + i * 25, 100, 15);
			//ctx.fillText(words[i], 80, 30 + i * 25);
			
		
			
		ctx.fillRect(131, 26 + (n-1) * 25, 48, 13);
		ctx.fillStyle = '#dd0000';
        ctx.fillText(words[n], 155, 35 + (n-1) * 25);
		
	}
}

function redraw(pre)
{
	document.getElementById(codeid[pre]).setAttribute("class","");
	document.getElementById(javaid[pre]).setAttribute("class","");
	document.getElementById(codeid[pre]).style.color="black";
	//document.getElementById(codeid[pre]).style.background="white"; 
	document.getElementById(javaid[pre]).style.color="black";
	//document.getElementById(javaid[pre]).style.background="white";  
	clearColor(pre);
}
function clearColor(n)
{
	if(n < 3)
	{
		
		ctx.fillStyle = 'black';
		ctx.clearRect(71, 11 + n * 25, 98, 13);
        ctx.fillText(words[n], 120, 20 + n * 25);
	}
	else if(n == 3)
	{	
	
	
		ctx.fillStyle = 'white';
		ctx.beginPath();
		ctx.moveTo(72, 35 + (n-1) * 25 + 15);
        ctx.lineTo(120, 36 + (n-1) * 25);
        ctx.lineTo(168, 35 + (n-1) * 25 + 15);
        ctx.lineTo(120, 34 + (n-1) * 25 + 30);
		ctx.closePath();
		ctx.fill();
		ctx.fillStyle = 'black';
		//ctx.fillText(words[n], 75, 30+n*25);
		ctx.fillText(words[n], 120, 27.5 + n * 25);	
		
		
		
	}
	else if(n == 4)
	{
	
		
		ctx.fillStyle = 'white';
		ctx.beginPath();
		ctx.moveTo(87, 50 + (n-1) * 25 + 12.5);
		ctx.lineTo(120, 51 + (n-1) * 25);
		ctx.lineTo(153, 50 + (n-1) * 25 + 12.5);
		ctx.lineTo(120, 74 + (n-1) * 25);
		ctx.closePath();
		ctx.fill();
		ctx.fillStyle = 'black';
		ctx.fillText(words[n], 120, 40 + n * 25);
		
	}
	else if(n < 7)
	{
		
		ctx.fillStyle = 'black';
		ctx.clearRect(41, 31 + n * 25 + (n-5) * 7.5, 58, 13);
        ctx.fillText(words[n], 70, 40 + n * 25 + (n-5) * 7.5);
		
	}
	else if(n == 7)
	{
		
		ctx.fillStyle = 'black';	
		ctx.clearRect(111, 46 + (n-2) * 25, 18, 13);
        ctx.fillText(words[n], 120, 55 + (n-2) * 25);	
    }
	else if(n == 8)
	{
		ctx.fillStyle = 'white';
		ctx.beginPath();
		ctx.moveTo(103, 40 + n * 25);
        ctx.lineTo(120, 31 + n * 25);
        ctx.lineTo(137, 40 + n * 25);
        ctx.lineTo(120, 49 + n * 25);
		ctx.closePath();
		ctx.fill();
		ctx.fillStyle = 'black';
		ctx.fillText(words[n], 120, 42.5 + n * 25);	
    }
	else if(n == 9)
	{
		
		ctx.fillStyle = 'black';
		ctx.clearRect(61, 26 + n * 25, 48, 13);
        ctx.fillText(words[n], 85, 35 + n * 25);
	}
	else
	{
		ctx.fillStyle = 'black';
		ctx.clearRect(131, 26 + (n-1) * 25, 48, 13);
        ctx.fillText(words[n], 155, 35 + (n-1) * 25);
		
	}
	//ctx.fillText(words[n], 75, 30 + n * 25);
}


function printRed(id, num)
{
	document.getElementById(id).innerHTML = "<font color=red>" + num + "</font>";
}
function printBlack(id, num)
{
	document.getElementById(id).innerHTML = num;
}
function printAns(id, ss)
{
	document.getElementById(id).innerHTML = ss;
}


function getInput()
{	
	num = Math.round(document.getElementById('intNum').value);
	//s = document.getElementById('str').value;
	//num1 = Math.round(document.getElementById('intNum1').value);
	//num2 = Math.round(document.getElementById('intNum2').value);
}
function step_show()
{
	//document.getElementById("B_auto").disabled = false;
	//document.getElementById("B_next").disabled = true;
	
	switch(current)
	{
		/*case -1:
			getInput();
			current++;
			break;*/
		case -1:
			getInput();
			if(num < 2)
			{
				alert("請輸入大於等於2的值");
				break;
			}
			current++;
			
			words[0] = "int num = " + num;
			highlight(current);
			pre = current;
			current++;
			break;
		case 1:
			printRed("ptintP", p);
			
			redraw(pre);
			highlight(current);
			pre = current;
			current++;
			break;
		case 2:
			printBlack("ptintP", p);
			printRed("ptintI", inti);
			
			redraw(pre);
			highlight(current);
			pre = current;
			current++;
			break;
		case 3:
			printBlack("ptintI", inti);
			
			redraw(pre);
			highlight(current);
			pre = current;
			if(inti <= Math.sqrt(num))
			{
				current++;
				//alert(Math.sqrt(num));
			}
			else
			{
				current = 8;
			}
			break;
		case 4:
			redraw(pre);
			highlight(current);
			pre = current;
			if(num % inti == 0)
			{
				current++;
			}
			else
			{
				current = 7;
			}
			
			break;
		case 5:
			p = false;
			printRed("ptintP", p);
			//num2 = temp;
			//printBlack("ptintNum1", num1);
			//printRed("ptintNum2", num2);
			
			redraw(pre);
			highlight(current);
			pre = current;
			current++;
			break;
		case 6:
			printBlack("ptintP", p);
			
			redraw(pre);
			highlight(current);
			pre = current;
			current = 8;
			break;
			/*
			temp = num1 % num2;
			printBlack("ptintNum2", num2);
			printRed("ptintTemp", temp);
			
			redraw(pre);
			highlight(current);
			pre = current;
			current++;
			break;*/
		case 7:
			//printBlack("ptintNum2", num2);
			inti++;
			printRed("ptintI", inti);
			
			redraw(pre);
			highlight(current);
			pre = current;
			current = 3;
			break;
		case 8:
			redraw(pre);
			highlight(current);
			pre = current;
			if(p)
			{
				current++;
			}
			else
			{
				current = 10;
			}
			break;
		case 9:
			printBlack("ptintP", p);
			printAns("SCprint", "是質數");
			
			redraw(pre);
			highlight(current);
			pre = current;
			current = 11;
			break;
		case 10:
			printBlack("ptintP", p);
			printAns("SCprint", "非質數");
			
			redraw(pre);
			highlight(current);
			pre = current;
			current++;
			break;
		case 11:
			redraw(pre);
			pre = -1;
			clearall();
			break;
		
	}
   
}



var rid=['p1','p2','p3'];
var speed = 0.5;
function getspeed()
{
	for (var i=0;i<=2;i++)
	{
		if (document.getElementById(rid[i]).checked) 
		{
			speed = parseFloat(document.getElementById(rid[i]).value);//0.5 or 1 or 2
		}
	}
}
var timer;
//var counter = 0;
function auto_show()
{
	
	//document.getElementById("B_next").disabled = true;
	getInput();
	
	if(num < 2)
	{
		alert("請輸入大於等於2的值");
	}
	else
	{
		document.getElementById("B_auto").disabled = true;
		timer = window.setInterval("controlAutoShow();", speed * 1000);
	}
    //sec = codeid.length; 
	//ann = -1;
    //clearall() ;
    
}
function controlAutoShow()
{
	//counter++;
	if(current < 11)
	{
		step_show();//第7個不會重畫
	}
	else
	{
		step_show();
		resettimer();
	}
    
}
function resettimer()
{
    window.clearInterval(timer); 
	document.getElementById("B_auto").disabled = false;
    //counter = 0;
}
function clearall() 
{
	
	resettimer();
    current = -1;
	inti = 2;
	p = true;
    redraw(pre);
    //printBlack("ptintNum1", num1);
	//printBlack("ptintNum2", num2);
	//printBlack("ptintTemp", temp);
    
	document.getElementById("B_auto").disabled = false;
	document.getElementById("B_next").disabled = false;
	
}







</script>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css"> 
	<link rel="stylesheet" href="css/main.css">
	<script src="js/jquery-3.4.1.min.js"></script>
	<script src="bootstrap/js/bootstrap.min.js"></script>	
	<script src="js/popper.min.js"></script>
  
	<style>
	.go-top
	{
		position: fixed;	    /* 設置fixed固定定位 */
		bottom: 20px;			/* 距離下邊框20px */
		left: 40px;		
	}
	</style>
	
	
	<title>判斷質數For</title> 
</head>








<body onload='initFlowChart()'>


<nav class="navbar navbar-expand-lg navbar-light" style="background:#6a337f" >
	<a class="navbar-brand" href="main.html" style="color:white">迴圈應用</a>
	
	<div class="collapse navbar-collapse" id="navbarNavDropdown">
		<ul class="navbar-nav mr-auto mt-2 mt-lg-0">
		  
		  <li class="nav-item">
			<a class="nav-link" href="main.html" style="color:white">首頁</a>
		  </li>		  
		  
		  <li class="nav-item">
			<a class="nav-link" href="test.html" style="color:white">解題評量</a>
		  </li>	
		</ul>
	</div>
</nav>


<header>
    <div class="container mt-3">	  	
		<h1>判斷質數</h1>
        <h5 class="text-muted">迴圈：for</h5>
		
    </div>
	
	
</header>  



<div class="container">
	<div class="row">
		<div class="col-md-11">
		<article>
		
		<table border=0 class="table table-sm">
			<thead class="thead-light">
				<tr>
					<th>說明</th>
					<th>程式碼</th> 
					<th>流程圖</th>
				</tr>
			</thead>		
			<tbody>
				<tr>
					<td id=s1>設定int num 的值</td>
					<td id=c1>int num = <input type=text id='intNum' > ;</td>
					<td rowspan=11><canvas id='cs1' width='430' height='550'></canvas></td>
				</tr>
				<tr>
					<td id=s2>設定boolean isPrime 為 true</td>
					<td id=c2>boolean isPrime = true;</td>
				</tr>
				<tr>
					<td id=s3>設定int i 為 2</td>
					<td id=c3>int i = 2;</td>
				</tr>
				<tr>
					<td id=s4>判斷 i 是否小於等於 num 的平方根</td>
					<td id=c4>for( ;i &lt;= Math.sqrt(num); ) {</td>
				</tr>
				<tr>
					<td id=s5>判斷 num 取 i 的餘數是否等於 0</td>
					<td id=c5>&nbsp;&nbsp;&nbsp;&nbsp;if(num % i == 0) {</td>
				</tr>
				<tr>
					<td id=s6>isPrime 為 false</td>
					<td id=c6>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isPrime = false;</td>
				</tr>
				<tr>
					<td id=s7>跳出此迴圈</td>
					<td id=c7>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break; }</td>
				</tr>
				<tr>
					<td id=s8>i 的值加 1</td>
					<td id=c8>&nbsp;&nbsp;&nbsp;&nbsp;i++; }</td>
				</tr>
				<tr>
					<td id=s9>判斷 isPrime </td>
					<td id=c9>if(isPrime){</td>
				</tr>
				<tr>
					<td id=s10>輸出 是質數</td>
					<td id=c10>&nbsp;&nbsp;&nbsp;&nbsp;System.out.println("是質數"); } </td>
				</tr>
				<tr>
					<td id=s11>輸出 非質數</td>
					<td id=c11>else {<br>&nbsp;&nbsp;&nbsp;&nbsp;System.out.println("非質數"); }</td>
				</tr>
				
			</tbody>
		</table>
		<div class="radio-inline go-top" style="background:#fafafa;">
		<font size=4>
		速度:
			<label>
				<input type="radio" name="rate" id="p1" value="0.5" onclick="getspeed();" checked>快 (0.5秒)
			</label>

			<label>
				<input type="radio" name="rate" id="p2" value="1" onclick="getspeed();">中 (1秒)
			</label>
			
			<label>
				<input type="radio" name="rate" id="p3" value="1.5" onclick="getspeed();">慢 (1.5秒)     
			</label>
		</font>
		<button type="button" class="btn btn-outline-secondary" id='B_auto' onclick="auto_show();"><b>自動</b></button>
		<button type="button" class="btn btn-outline-secondary" id='B_next' onclick="step_show();resettimer();"><b>下一步</b></button>
		<button type="button" class="btn btn-outline-secondary" onclick="clearall();"><b>重新</b></button>
		</div>
		</article>
		</div>
		
		<div class="col-md-1">
		<aside>
			<table class="table table-condensed table-hover">
			<thead class="thead-light">
				<tr class="">
					<th>變數</th>
					<th>值</th> 
							
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>isPrime</td>
					<td id=ptintP>true</td>
				</tr>
				<tr>
					<td>i</td>
					<td id=ptintI>2</td>
				</tr>
			</tbody>
			</table>
			
			<table class="table table-condensed rounded" style="background:#6c757d;color:white;white-space:nowrap;">
			<thead class="">
				<tr class="">
					<th colspan=3>輸出畫面</th> <th></th> <th></th> 
					
				</tr>
			</thead>
			<tbody>
				<tr>
					<td id=SCprint></td>
				</tr>
				
			</tbody>
			</table>
		</aside>
		</div>
	</div>
</div>


<hr>

</body>
</html>